@model TraveLust.Models.Groupchat
<h2>Your groupchats</h2>
<br />

@if (ViewBag.Message != null)
{
    <h2 class="alert-secondary p-3 rounded-3 text-center mb-5">@ViewBag.Message</h2>
}

@foreach (var groupchat in ViewBag.Groupchats)
{
    <hr />
    <p>@groupchat.Name, created by @groupchat.Creator.UserName</p>

    <div class="card-text">@Html.Raw(groupchat.Description)</div>

    <a class="btn btn-outline-secondary" href="/Groupchats/Edit/@groupchat.GroupchatId">Edit groupchat details</a>

    <a class="btn btn-outline-secondary" href="/Groupchats/AddFriends/@groupchat.GroupchatId">Add/Remove travel buddies</a>

    //generated by GitHub Copilot
    if (groupchat.Creator.Id == ViewBag.CurrentUserId)
    {
        <a class="btn btn-outline-secondary" href="/Groupchats/Delete/@groupchat.GroupchatId">Delete groupchat</a>
    }
    else
    {
        <form method="post" action="/UserInGroupchats/Delete">
            <input type="hidden" name="UserId" value="@ViewBag.CurrentUserId" />
            <input type="hidden" name="GroupchatId" value="@groupchat.GroupchatId" />
            <button class="btn btn-outline-secondary" type="submit">Leave groupchat</button>
        </form>
    }

    <br />
    <br />
}
<hr />
<br />
<a class="btn btn-outline-secondary" href="/Groupchats/New">Create new groupchat!</a>
<br />